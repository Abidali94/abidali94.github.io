<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grocery Expense Split (Pro)</title>
<style>
    body { font-family: Arial, sans-serif; background:#fffaf0; margin:0; padding:30px; text-align:center; }
    h2 { color:#444; margin-bottom:20px; }
    input { padding:10px; margin:6px; border-radius:6px; border:1px solid #bbb; width:200px; }
    button { background:#ff7a00; color:#fff; border:none; padding:10px 14px; border-radius:6px; cursor:pointer; margin:6px; }
    table { margin:20px auto; border-collapse:collapse; width:90%; max-width:420px; }
    th, td { border:1px solid #aaa; padding:8px; background:#fff; }
    .person-row { margin-bottom:10px; }
</style>
</head>
<body>

<h2>üõí Grocery Expense Split (Unlimited)</h2>

<div id="persons"></div>

<button onclick="addPerson()">+ Add Person</button>
<br>
<button onclick="calculate()">Calculate Settlement</button>

<div id="result"></div>

<p style="margin-top:25px;">
   <a href="../index.html">‚Üê Back to Home</a>
</p>

<script>
let count = 0;

function addPerson(){
    count++;
    const div = document.createElement("div");
    div.classList.add("person-row");
    div.innerHTML = `
        <input type="text" id="name${count}" placeholder="Name">
        <input type="number" id="spent${count}" placeholder="Amount Spent (‚Çπ)">
    `;
    document.getElementById("persons").appendChild(div);
}

function calculate(){
    let people = [];
    let total = 0;

    for(let i=1; i<=count; i++){
        let name = document.getElementById("name"+i).value;
        let spent = document.getElementById("spent"+i).value;

        if(name && spent){
            spent = parseFloat(spent);
            people.push({name, spent});
            total += spent;
        }
    }

    if(people.length === 0){
        alert("Add at least one person.");
        return;
    }

    let share = total / people.length;

    let html = `<h3>Total: ‚Çπ${total.toFixed(2)} | Each should pay: ‚Çπ${share.toFixed(2)}</h3>`;
    html += `<table><tr><th>Name</th><th>Spent</th><th>Give / Take</th></tr>`;

    people.forEach(p => {
        let diff = p.spent - share;
        let status = diff > 0 ? `Should Receive ‚Çπ${diff.toFixed(2)}` : `Should Pay ‚Çπ${Math.abs(diff).toFixed(2)}`;
        html += `<tr><td>${p.name}</td><td>‚Çπ${p.spent.toFixed(2)}</td><td>${status}</td></tr>`;
    });

    html += `</table>`;
    document.getElementById("result").innerHTML = html;
}
</script>

</body>
</html>
