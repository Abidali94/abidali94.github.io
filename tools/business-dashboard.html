<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ“¦ KharchaSaathi â€” Business Dashboard (v1.3)</title>
  <meta name="theme-color" content="#ff7a00" />
  <link rel="icon" href="/favicon.png" />
  <link rel="apple-touch-icon" href="/favicon.png" />

  <style>
    :root{
      --orange:#ff7a00; --orange-dark:#cc6300;
      --bg:#f8f9fa; --card:#ffffff; --text:#222;
      --dark-bg:#0f0f0f; --dark-card:#1a1a1a; --dark-text:#f2f2f2; --dark-border:#333;
    }
    *{box-sizing:border-box;transition:background .18s,color .18s}
    html,body{height:100%}
    body{
      margin:0;padding:18px;font-family:Poppins,Arial,sans-serif;
      background:var(--bg);color:var(--text);
    }
    body.dark{background:var(--dark-bg);color:var(--dark-text)}

    /* Topbar */
    .topbar{
      display:flex;justify-content:space-between;
      align-items:center;gap:10px;flex-wrap:wrap;
      margin-bottom:12px
    }
    h1{margin:0;font-size:20px;color:var(--orange)}
    .theme-btn,.small-btn{
      background:var(--orange);color:#fff;border:none;
      padding:8px 10px;border-radius:8px;cursor:pointer
    }
    .theme-btn:hover,.small-btn:hover{background:var(--orange-dark)}

    #emailTag{
      font-size:13px;opacity:.75;margin-right:8px;
      background:#eee;padding:4px 8px;border-radius:6px;
    }
    body.dark #emailTag{background:#222;color:#ddd}

    /* Tabs */
    .tabs{
      display:flex;gap:8px;margin:8px 0 16px;
      justify-content:center;flex-wrap:nowrap;overflow-x:auto
    }
    .tabs::-webkit-scrollbar{display:none}
    .tab{
      background:#eee;padding:8px 12px;border-radius:10px;
      cursor:pointer;font-weight:600;white-space:nowrap
    }
    .tab.active{background:var(--orange);color:#fff}
    body.dark .tab{background:#222;color:#ccc}
    body.dark .tab.active{background:var(--orange-dark);color:#fff}

    /* Sections */
    .section{
      display:none;background:var(--card);padding:14px;
      border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.05);
      margin-bottom:18px
    }
    .section.active{display:block}
    body.dark .section{
      background:var(--dark-card);
      border:1px solid var(--dark-border);color:var(--dark-text)
    }

    /* Summary + layout */
    .flex-row{display:flex;gap:18px;flex-wrap:wrap;align-items:flex-start}
    #overview-left{flex:1;min-width:280px}
    #overview-right{flex:1;min-width:320px;max-width:620px}

    #summaryCards{
      display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-start
    }
    #summaryCards .card{
      flex:1;min-width:140px;border-radius:12px;padding:12px;
      text-align:center;background:var(--card);
      box-shadow:0 6px 14px rgba(0,0,0,0.04)
    }
    #summaryCards .card small{font-size:13px;opacity:.85}
    body.dark #summaryCards .card{
      background:var(--dark-card);
      color:var(--dark-text);border:1px solid var(--dark-border)
    }
    #summaryCards .card b {
      color: var(--orange);
      font-size: 20px;
    }

    /* Table */
    table{
      width:100%;border-collapse:collapse;margin-top:12px;
      font-size:14px;border-radius:8px;overflow:hidden
    }
    th,td{padding:8px;border:1px solid #ddd;text-align:center}
    th{background:var(--orange);color:#fff}
    body.dark th{background:var(--orange-dark)}
    tr:nth-child(even){background:#fdfdfd}
    body.dark tr:nth-child(even){background:#1f1f1f}
    tr:hover{background:#fff3e0}

    /* small forms */
    .row-inline{
      display:flex;gap:8px;align-items:center;flex-wrap:wrap
    }
    .row-inline input[type="text"],
    .row-inline input[type="number"],
    .row-inline select,
    .row-inline input[type="date"]{
      padding:6px;border-radius:6px;border:1px solid #ddd
    }

    /* Wanting */
    .want-form{
      display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px;align-items:center
    }
    .want-form input,.want-form select{
      padding:7px;border-radius:6px;border:1px solid #ddd
    }
    /* Stock Alert Colors */
    .ok { color: green; font-weight: bold; }
    .low { background:#fff3cd; color:#ff9800; font-weight:bold; }
    .out { background:#ffcdd2; color:#d32f2f; font-weight:bold; }
  </style>
</head>

<body>

  <!-- ğŸ” TOPBAR -->
  <div class="topbar">
    <h1>ğŸ“¦ KharchaSaathi (Offline)</h1>

    <div style="display:flex;gap:10px;align-items:center">

      <span id="emailTag">Loading...</span>

      <button id="themeBtn" class="theme-btn">ğŸŒ™</button>

      <a class="small-btn" href="/index.html">ğŸ  Back</a>

      <button id="logoutBtn" class="small-btn" style="background:#e53935">
        ğŸ”“ Logout
      </button>
    </div>
  </div>
  <!-- ===== TABS ===== -->
  <div class="tabs" role="tablist">
    <div class="tab active" data-tab="types">ğŸ—‚ Types</div>
    <div class="tab" data-tab="stock">ğŸ“¦ Stock</div>
    <div class="tab" data-tab="sales">ğŸ“ˆ Sales</div>
    <div class="tab" data-tab="wanting">ğŸ›’ Wanting</div>
    <div class="tab" data-tab="dashboard">ğŸ“Š Overview</div>
    <div class="tab" data-tab="analytics">ğŸ“ˆ Smart Dashboard</div>
    <div class="tab" data-tab="expenses">ğŸ’¸ Expenses</div>
  </div>
  

  <!-- ===== TYPES ===== -->
  <section id="types" class="section active">
    <h3>ğŸ—‚ Manage Item Types</h3>
    <div class="row-inline" style="margin-top:8px">
      <input id="typeName" type="text" placeholder="Add new type" style="flex:1;min-width:160px">
      <button id="addTypeBtn" class="small-btn">Add</button>
      <button id="clearTypesBtn" class="small-btn">Clear All</button>
    </div>
    <ul id="typeList" style="margin-top:10px;padding-left:18px"></ul>
  </section>

  <!-- ===== STOCK ===== -->
  <section id="stock" class="section">
    <h3>ğŸ“¦ Current Stock</h3>

    <div class="row-inline" style="margin-top:6px">
      <label>Low Stock:</label>
      <input id="globalLimit" type="number" placeholder="2" style="width:80px">
      <button id="setLimitBtn" class="small-btn">Set</button>
      <button id="clearStockBtn" class="small-btn">Clear All</button>
    </div>

    <div class="row-inline" style="margin-top:12px">
      <input id="pdate" type="date">
      <select id="ptype"></select>
      <input id="pname" type="text" placeholder="Product">
      <input id="pqty" type="number" placeholder="Qty" style="width:80px">
      <input id="pcost" type="number" placeholder="Cost â‚¹" style="width:90px">
      <button id="addStockBtn" class="small-btn">Add</button>
    </div>

    <div style="margin-top:12px">
      <b>Filter Type:</b>
      <select id="filterType"><option value="all">All</option></select>
    </div>

    <table id="stockTable">
      <thead>
        <tr>
          <th>Date</th><th>Type</th><th>Product</th><th>Qty</th>
          <th>Sold</th><th>Remain</th><th>Alert</th><th>Limit</th><th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>
